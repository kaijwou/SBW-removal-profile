<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.css" />
  <style>
    html, body { margin:0; padding:0; }
    #holder { display:flex; align-items:center; justify-content:center; padding:8px; }
  </style>
</head>
<body>
  <div id="holder"><div id="angle-slider"></div></div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.js"></script>
  <script src="https://unpkg.com/streamlit-component-lib@1.5.0/dist/index.js"></script>
  <script>
    let inited = false;
    function mountSlider(args) {
      const opt = Object.assign({
        value: 0, min: 0, max: 360, step: 1,
        radius: 110, width: 12, startAngle: 0, circleShape: "full"
      }, args || {});
      if (!inited) {
        $("#angle-slider").roundSlider({
          radius: opt.radius,
          width: opt.width,
          min: opt.min,
          max: opt.max,
          step: opt.step,
          value: opt.value,
          circleShape: opt.circleShape,
          startAngle: opt.startAngle,
          handleShape: "dot",
          sliderType: "min-range",
          drag: e => Streamlit.setComponentValue(e.value),
          change: e => Streamlit.setComponentValue(e.value),
        });
        inited = true;
      } else {
        const api = $("#angle-slider");
        api.roundSlider("option", "min", opt.min);
        api.roundSlider("option", "max", opt.max);
        api.roundSlider("option", "step", opt.step);
        api.roundSlider("option", "startAngle", opt.startAngle);
        api.roundSlider("option", "circleShape", opt.circleShape);
        api.roundSlider("option", "radius", opt.radius);
        api.roundSlider("option", "width", opt.width);
        api.roundSlider("setValue", opt.value);
      }
      Streamlit.setFrameHeight();
    }
    function onRender(event) { mountSlider(event.detail.args); }
    Streamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender);
    Streamlit.setComponentReady();
    Streamlit.setFrameHeight();
  </script>
</body>
</html>
